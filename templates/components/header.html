{% load static %}
{% block head %}
  <link rel="stylesheet/less" type="text/css" href="{% static 'style/components/header.less' %}">
{% endblock head %}
<header id="main-header" class="principal-header">
  {% include "components/logo.html" %}

  {% if user.is_authenticated %}
    <section class="dropdown-menu">
      <a onclick="handleDropdown()" class="dropdown-username down-arrow">Ol√°, {{ user.username }}</a>
      <ul class="dropdown" class="dropdown-content">
        <li><a href="/profile_url/">Meu Perfil</a></li>
        <li><a href="logout/">Sair</a></li>
      </ul>
    </section>
  {% else %}
    <section class="login-signup">
      <ul>
        <li><a href="login/">Acessar</a></li>
        <li><a href="signup/">Registrar</a></li>
      </ul>
    </section>
  {% endif %}
</header>
<script>
  const handleDropdown = () => {
    document.querySelector('header#main-header').classList.toggle('open-dropdown')
  }

  window.onclick = (event) => {
    if (!event.target.matches('.dropdown-username')){
      let dropdowns = document.getElementsByClassName('principal-header');
      let i;
      for(i = 0; i < dropdowns.length; i++){
        let openDropdown = dropdowns[i];
        if(openDropdown.classList.contains('open-dropdown')) {
          openDropdown.classList.remove('open-dropdown');
        }
      }
    }
  }
</script>
