{% load static %}
{% block head %}
  <link rel="stylesheet/less" type="text/css" href="{% static 'style/components/sidebar-nav.less' %}">
{% endblock head %}
<nav id="sidebar">
  <ul class="menu">
    <li class="user">
      {% if user.profile.avatar_image %}
        <img class="user-avatar" src="{{ user.profile.avatar_image.url }}" alt="">
      {% else %}
        <img class="user-avatar" src="{% static 'img/default-avatar.svg' %}" alt="">
      {% endif %}
      <span class="username"><a href="{% url 'profile_url' %}">
        {% if user.first_name %}
          {{ user.first_name }}
        {% else %}
          {{ user.username }}
        {% endif %}
      </a></span>
    </li>
    <li class="menu-item themes"><a href="{% url 'themes_active' %}">Temas</a></li>
    <li class="menu-item essays"><a href="{% url 'writer:all_essays' %}">Redações</a></li>
  </ul>
</nav>

<script>
'use strict';
(function () {
  const sidebar = document.querySelector('#sidebar');
  const header_logo = document.querySelector('#main-header .logo');

  [header_logo, sidebar].map(function (element) {
    element.addEventListener('mouseenter', function (ev) {
      document.body.classList.add('open-sidebar');
    });
    element.addEventListener('mouseleave', function (ev) {
      document.body.classList.remove('open-sidebar');
    });
  });
})();

(function () {
  const path_URL = document.location.pathname;
  let page = "";

  switch (path_URL) {
    case "{% url 'themes_active' %}":
      page = '#sidebar .menu li.themes'
      break;
    case "{% url 'writer:all_essays' %}":
      page = '#sidebar .menu li.essays'
      break;
    default:
      break;
  }
  document.querySelector(page).classList.add('active');
})();
</script>
